apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: cluster-issuer-vault
  annotations:
    avp.kubernetes.io/path: "secret/data/vault/mtls"
spec:
  vault:
    server: https://vault.vault.svc.cluster.local:8200
    path: pki_int/sign/intermidiate-role
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM0VENDQWNtZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFTTVJBd0RnWURWUVFERXdkcmRXSmwKTFdOaE1CNFhEVEkwTURjd056RXlNVE14TTFvWERUTTBNRGN3TlRFeU1UTXhNMW93RWpFUU1BNEdBMVVFQXhNSAphM1ZpWlMxallUQ0NBU0l3RFFZSktvWklodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQU42TjFuQ0xuN28vCjB6a3c4RG9ISkVvYk12U0RqcmpsKzBnMlhGK1F5RGlvQy9JdWVRZjZ3ZnRxVUs1NTNTbXFvMXBYZXBvcHBjRXQKR3hVc3pjaDhERTRkdiszQVc4aHVweHlSMFRnY2NPaWtDMkR0V3RpdGxPMk5WUitXbzF6RUxUYTQvelJNVXdydQp3UC9HTnVZelpabklYblBQbjF0U1VGOFhhbVkxcjRnbWhSb3ZRTDZjSTN6OUJoaitzcGgyU0tHVjNjd0g3Uk05CmNWR2tIL1Z5NnFRaE40QktPQmJNVlB4VWJrNW4vaDhMa3FmN1VwV2JLTE50d0ZXN0hGekUzL1hnRm5GU3pnV2MKcEtOK29RaFNUdm5DTU5xajhYUEluQ2oyR2EwSFc4TWRSajlycjM4Zi9RYnNrd1ZqL084M1NmVElqeWJNQVpxcApWb3BVK1l3NERjMENBd0VBQWFOQ01FQXdEZ1lEVlIwUEFRSC9CQVFEQWdLa01BOEdBMVVkRXdFQi93UUZNQU1CCkFmOHdIUVlEVlIwT0JCWUVGTGs2b3NITUtuU1pZM05wRFBJdjJabTVrQitSTUEwR0NTcUdTSWIzRFFFQkN3VUEKQTRJQkFRREdmT1RnTUJjNTg2TjZwalJUQjdOM2c5OGVDNDhkYnZZcTVMWlV3RC92dGpib0pLdUdob1Z1emVMRQpEeEtVdUF0Wkpab3hUZDhlT1J0OU0wTTl6Q1VyUFhrajIxaWNzR0krTzZoYm51Ym9iSXF4b2o5S3QybVpxOCt5ClFXOTZhK1BySythV0s3dHRUc1JsZUREUmRlVktLWFZlazFhRmZmTDVmUHFBS2VIS0Nuam5rajl6OGVLRnFoOHEKRU02L08rNGVGVm5HYmFUMUw3ckdHSllUTkp2TitMUVJVb0JTTWlTcG1NNVRYNElzcnNJVHd4ZHFKd0prVk9kNApySHM1RmZTS0ZMYTQ5L3FVRitha2Zvd2k5TWlmb1Z0bDFpdVF4VzVvZFVzTGp2N3dya3BMNVpZSUhkMEJNVFBsCk5FQWVCcXVvVGJKN1hXcjRKdWN2cVYyekdOZ1oKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
    auth:
      kubernetes:
        mountPath: /v1/auth/kubernetes
        role: cert-manager
        serviceAccountRef:
          name: cert-manager